/*
=====================================================================================================================================
         							ATUALIZACOES SOFRIDAS DESDE A CONSTRUCAO INICIAL
=====================================================================================================================================
	Autor	|	Data	|										Motivo																|
------------:-----------:-----------------------------------------------------------------------------------------------------------:
Darcio      | 30/11/15  | Ponto de Entrada responsável por executar filtro na tela de seleção de solicitação por item no pedido de 	|
			|			| compras. Chamado: 12836																					|
------------:-----------:-----------------------------------------------------------------------------------------------------------:
Darcio		| 17/12/15	| Foi complementada o filtro, para não carregar SC's sem grupo, eliminada resíduos, liberadas e com o grupo	|
			|			| o mesmo do usuário logado. Chamado: 13268																	|
=====================================================================================================================================
*/
#include "rwmake.ch"
#include "protheus.ch"

/*
===============================================================================================================================
Programa----------: A120F4FI
Autor-------------: Darcio Ribeiro Sporl
Data da Criacao---: 30/11/2015
===============================================================================================================================
Descrição---------: Ponto de Entrada responsável por filtrar a tabela SC1 por itens da solicitação
===============================================================================================================================
Uso---------------: Italac
===============================================================================================================================
Parametros--------: Nenhum
===============================================================================================================================
Retorno-----------: aRet[1] - 	1 - String - Filtro no SC1 para ISAM ( Sintaxe xBase )
------------------:				2 - String - Filtro no SC1 para SQL ( Sintaxe SQL )
------------------:				3 - String - Filtro no SC3 para ISAM ( Sintaxe xBase )
------------------:				4 - String - Filtro no SC3 para SQL ( Sintaxe SQL )
------------------:				Não é necessário definir todos os elementos do array.
===============================================================================================================================
Usuario-----------: 
===============================================================================================================================
Setor-------------: Compras
===============================================================================================================================
*/

User Function A120F4FI()
Local aArea	:= GetArea()
Local aRet	:= {}

dbSelectArea("SY1")
dbSetOrder(3)
dbSeek(xFilial("SY1") + __cUserID)

aRet	:= {"C1_CODCOMP <> ' ' .AND. C1_QUJE < C1_QUANT .AND. C1_RESIDUO <> 'S' .AND. !EMPTY(C1_GRUPCOM) .AND. C1_GRUPCOM == '" + SY1->Y1_GRUPCOM + "' .AND. C1_APROV == 'L'",,,}

RestArea(aArea)
Return(aRet)