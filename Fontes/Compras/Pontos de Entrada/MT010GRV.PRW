/*
====================================================================================================================================
               ULTIMAS ATUALIZAÇÕES EFETUADAS - CONSULTAR LOG DO VERSIONADOR PARA HISTORICO COMPLETO
====================================================================================================================================
Analista    - Programador   - Inicio   - Envio    - Chamado - Motivo da Alteração
==============================================================================================================================================================
Andre       - Alex Wallauer - 27/03/25 - 28/03/25 - 49970   - Ajuste para não enviar se já tiver aprovado.
==============================================================================================================================================================
*/  

//====================================================================================================
// Definicoes de Includes da Rotina.
//====================================================================================================

/*
======================================================== =======================================================================
Programa----------: MT010GRV
Autor-------------: Alex Wallauer Ferreira
Data da Criacao---: 28/06/2024
===============================================================================================================================
Descrição---------: PE no final da gravação do Cadastro de tabela de preço dentro da 
                    função Com010Grv()/COMA010.PRX. Chamado: 47732
===============================================================================================================================
Parametros--------: ParamIXB[1]: [1] Inclusao / [2] Alteracao / [3] Excluir / [4] Copiar
===============================================================================================================================
Retorno-----------: .T.
===============================================================================================================================
*/
User Function MT010GRV()
LOCAL nOpcao :=ParamIXB[1] // [1] Inclusao / [2] Alteracao / [3] Excluir / [4] Copiar
//LOCAL aHeader:=ParamIXB[2]
//LOCAL aCols  :=ParamIXB[3]

IF (nOpcao = 1 .OR. nOpcao = 2 .OR. nOpcao = 4) .AND. M->AIA_I_DATE >= DATE() .AND. M->AIA_I_SITW <> "A"
   U_MCOM026("ENVIA")
ENDIF

IF (nOpcao = 1 .OR. nOpcao = 4)  
   U_ITMSG("TABELA GRAVADA COM SUCESSO, COM O CÓDIGO: "+M->AIA_CODTAB,'GRAVAÇÃO',,2)
ENDIF

RETURN .T.
