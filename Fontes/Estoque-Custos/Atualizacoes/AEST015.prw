/*
===============================================================================================================================
                                    ATUALIZACOES SOFRIDAS DESDE A CONSTRUCAO INICIAL
===============================================================================================================================
       Autor      |    Data    |                                             Motivo                                            
-------------------------------------------------------------------------------------------------------------------------------
 ===============================================================================================================================
*/

//====================================================================================================
// Definicoes de Includes da Rotina.
//====================================================================================================

#include 'protheus.ch'
#include 'parmtype.ch'

/*
===============================================================================================================================
Programa----------: AEST015
Autor-------------: André Lisboa
Data da Criacao---: 11/09/2017
===============================================================================================================================
Descricao---------: Validar permissão de acesso a rotina de solicitação ao armazém conforme cadastro na tabela ZZL
------------------: 
===============================================================================================================================
Parametros--------:
===============================================================================================================================
Retorno-----------: T/F
===============================================================================================================================
*/

user function AEST015()

Local _lRet := .T.
Local _lFunc := .T.

DbSelectArea("ZZL")
DbSetOrder(3)
If !DbSeek(xFilial("ZZL")+__cUserID)
	_lRet := .F.
	_lFunc := .F.
	U_ITMSG("Usuário não cadastrado","Erro","Favor abrir chamado solicitado cadastro",1)
Else
	If Empty(ZZL->ZZL_GRPAPR)
		_lRet := .F.
		_lFunc := .F.
		U_ITMSG("Usuário não cadastrado como solicitante","Erro","Favor abrir chamado solicitado cadastro vinculando a um grupo de aprovação",1)
	Endif
Endif	

If _lFunc
	MATA105()
Endif	
	
return(_lRet)